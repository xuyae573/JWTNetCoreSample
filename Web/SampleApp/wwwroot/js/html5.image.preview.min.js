/*!
 * == HTML5 Image Preview == Xu Ya updated by 30 May 2018
 * HTML structure:
 *	<div>
 *		<input type="file" name="imagefile" onchange="previewImage(this,{256,128,64},5)">
 *		<div class="imagePreview"></div>
 *	</div>
 *
 */
function previewImage(n,t,i){var c=n.files,l=n.parentNode,r=l.getElementsByClassName("imagePreview")[0],o=["JPG","JPEG","GIF","PNG","SVG","WEBP"],f,h,e;r.innerHTML="Loading...";var u=c[0],s=detectDevice();if(!s.android&&!u.type.match(/image.*/))return f=document.createElement("p"),r.innerHTML="",f.innerHTML="This is not valid Image file",r.appendChild(f),!1;h="";e=new FileReader;e.onload=function(){return function(n){var f,e,c,h,l;if(r.innerHTML="",f=n.target.result.split(";"),f=f[0].split("/"),f=f[1].split("+"),f=f[0].toUpperCase(),s.android&&(f=u.name.split("."),f=f[f.length-1].split("+"),f=f[0].toUpperCase()),$(".custom-file-label").html(u.name),e=document.createElement("p"),e.innerHTML="<br />This is a <b>"+f+"<\/b> image, size of <b>"+(n.total/1024).toFixed(2)+"<\/b> KB.",o.indexOf(f)>=0&&n.total<i*1048576){for(c in t)h=document.createElement("img"),l=n.target.result,h.src=l,h.width=t[c],h.title="Image preview "+t[c]+"px",r.appendChild(h);e.innerHTML+='<br /><span style="color:green;">Picture seems to be fine for upload.<\/span>';$(".btn-post").removeClass("disabled");$(".btn-post").removeAttr("disabled")}else e.innerHTML+='<br /><span style="color:red;">Which is wrong format / size! Accepted formats: '+o.join(", ")+". Size limit is: "+i+"MB<\/span>",$(".btn-post").addClass("disabled"),$(".btn-post").attr("disabled","disabled");r.appendChild(e)}}(h);e.readAsDataURL(u)}function detectDevice(){var n=navigator.userAgent;return{apple:n.match(/(iPhone|iPod|iPad)/),blackberry:n.match(/BlackBerry/),android:n.match(/Android/),microsoft:n.match(/Windows Phone/),zune:n.match(/ZuneWP7/)}}